{% extends 'base.html' %}
{% block content %}
<h2><span class="box">Add Task</span></h2>
<form action="{{ url_for('add_task') }}" method="post">
  <label>
    <span class="box">Task title</span>
    <input type="text" name="title" placeholder="Task title" required>
  </label>
  <label>
    <span class="box">Description</span>
    <textarea name="description" placeholder="Description"></textarea>
  </label>
  <button type="submit" class="btn box">Add</button>
</form>

<h2>Tasks</h2>
<table>
  <tr><th>Title</th><th>Description</th><th>Status</th><th>Created</th><th>Actions</th></tr>
  {% for t in tasks %}
  <tr>
    <td><span class="box">{{ t.title }}</span></td>
    <td><span class="box">{{ t.description }}</span></td>
    <td>{{ t.status }}</td>
    <td>{{ t.created_at }}</td>
    <td>
      {% if t.status != 'Completed' %}
      <form action="{{ url_for('complete_task', task_id=t.id) }}" method="post" style="display:inline;">
        <button type="submit">Complete</button>
      </form>
      {% endif %}
      <a href="{{ url_for('edit_task', task_id=t.id) }}">Edit</a>
      <form action="{{ url_for('delete_task', task_id=t.id) }}" method="post" style="display:inline;">
        <button type="submit">Delete</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}